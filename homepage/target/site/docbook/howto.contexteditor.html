<!--

    Licensed to the Austrian Association for Software Tool Integration (AASTI)
    under one or more contributor license agreements. See the NOTICE file
    distributed with this work for additional information regarding copyright
    ownership. The AASTI licenses this file to you under the Apache License,
    Version 2.0 (the "License"); you may not use this file except in compliance
    with the License. You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Sep 17, 2011 -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>
    
    
    
      Chapter 7. HowTo - Events with the OpenEngSB (Using the
      logging service)
    </title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");

            
      <!--[if IE]>
      @import url("../css/site-ie-fixes.css");
      <![endif]-->
    </style>

        <!--[if IE]><link rel="stylesheet" href="../css/site-ie-fixes.css" type="text/css" media="all" /><![endif]-->
    <link rel="icon" type="image/x-icon" href="../images/openengsb.ico" />
    <link rel="shortcut icon" type="image/x-icon" href="../images/openengsb.ico" />
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
        <meta name="Date-Revision-yyyymmdd" content="20110917" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                                    
<script type="text/javascript">var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-17453231-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type =
          'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
          'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(ga, s);
        })();</script>
                    </head>
  <body class="composite">
<div id="header">
    <div id="banner">
                  <span id="bannerLeft">
                                                <img src="../images/openengsb_small.png" alt="" />
                </span>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                                        <div class="xleft">
        Last Published: 2011-09-17
                  &nbsp;| Version: 2.0.0-SNAPSHOT "Qualified Q"
                      </div>
            <div class="xright">            <a href="http://openengsb.org/" class="externalLink" target="_blank">Final Release</a>
            |
                <a href="http://openengsb.org/milestone" class="externalLink" target="_blank">Milestone Release</a>
            |
                <a href="http://openengsb.org/nightly" class="externalLink" target="_blank">Nightly Release</a>
              
                              </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
</div>   
<div id="body">
	<div id="content">
    <div id="leftColumn">
      <div id="navcolumn">
             
                                                        <div class="menuItem"><h5>OpenEngSB</h5></div>
                  <ul>
                  <li class="none">
                  <a href="../index.html">Welcome</a>
            </li>
                  <li class="none">
                  <a href="../about.html">What is OpenEngSB?</a>
            </li>
                  <li class="none">
                  <a href="../downloads.html">Downloads</a>
            </li>
                  <li class="none">
                  <a href="https://github.com/openengsb/openengsb/raw/master/CHANGELOG.md" class="externalLink" target="_blank">Changelog</a>
            </li>
                  <li class="none">
                  <a href="https://github.com/openengsb/openengsb/blob/master/KNOWN_ISSUES.md" class="externalLink" target="_blank">Known Issues</a>
            </li>
                  <li class="none">
                  <a href="../sponsors.html">Sponsors</a>
            </li>
                  <li class="none">
                  <a href="../subprojects.html">Subprojects</a>
            </li>
          </ul>
                       <div class="menuItem"><h5>Quickstart</h5></div>
                  <ul>
                  <li class="none">
                  <a href="../docbook/howto.setup.html">Installation</a>
            </li>
                  <li class="none">
                  <a href="../docbook/howto.logging.html">Connectors and Domains</a>
            </li>
                  <li class="none">
            <strong>Events</strong>
          </li>
          </ul>
                       <div class="menuItem"><h5>Documentation</h5></div>
                  <ul>
                  <li class="none">
                  <a href="../manual/index.html">Manual</a>
            </li>
                  <li class="none">
                  <a href="../reference/faq.html">FAQ</a>
            </li>
                  <li class="none">
                  <a href="../reference/additional.html">Articles</a>
            </li>
                  <li class="none">
                  <a href="http://www.youtube.com/user/cdflexvideo" class="externalLink" target="_blank">Youtube Channel</a>
            </li>
          </ul>
                       <div class="menuItem"><h5>Community</h5></div>
                  <ul>
                  <li class="none">
                  <a href="../community/mailinglists.html">Mailing Lists</a>
            </li>
                  <li class="none">
                  <a href="../community/irc.html">IRC Channels</a>
            </li>
                  <li class="none">
                  <a href="http://twitter.com/openEngSB" class="externalLink" target="_blank">Twitter</a>
            </li>
                  <li class="none">
                  <a href="http://www.facebook.com/group.php?gid=208312030232" class="externalLink" target="_blank">Facebook</a>
            </li>
          </ul>
                       <div class="menuItem"><h5>Development</h5></div>
                  <ul>
                  <li class="none">
                  <a href="../contribution.html">Contribution</a>
            </li>
                  <li class="none">
                  <a href="../source-repository.html">Source</a>
            </li>
                  <li class="none">
                  <a href="../issue-tracking.html">Issues</a>
            </li>
                  <li class="none">
                  <a href="../integration.html">CI</a>
            </li>
                  <li class="none">
                  <a href="../team-list.html">Team</a>
            </li>
          </ul>
                   
                                    </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        
  
  
    
      
      
    
    
      
        
          
            <div class="title"><h2 class="title">
              <a name="howto.contexteditor" id="howto.contexteditor"></a>Chapter&#xa0;7.&#xa0;HowTo -
              Events with the OpenEngSB (Using the logging service)
            <a name="Chapter7.HowTo_-______________Events_with_the_OpenEngSB_Using_the_logging_service"></a></h2>
          
        
      
      
        
          
            
              </div><div class="title" style="clear: both"><h2 class="title" style="clear: both">
                <a name="d0e449" id="d0e449"></a>7.1.&#xa0;Goal
              <a name="a7.1.Goal"></a></h2>
            
          
        
        <p>
          This tutorial shows how the event system in the OpenEngSB
          can be used. Therefore a log and a domain connector are
          created and configured. The context system in the
          OpenEngSB is used to define which connectors should be
          used and a simple event is used starting a rule.
        </p>
      
      
        
          
            
              </div><div class="title" style="clear: both"><h2 class="title" style="clear: both">
                <a name="d0e454" id="d0e454"></a>7.2.&#xa0;Time to
                Complete
              <a name="a7.2.Time_to________________Complete"></a></h2>
            
          
        
        <p>
          If you are already familiar with using services in
          OpenEngSB about 30 minutes. (see <a href="howto.logging.html" class="link" title="Chapter 6. HowTo - First steps with the OpenEngSB (Send mails via the OpenEngSB)">HowTo:
          First steps</a>)
        </p>
      
      
        
          
            
              </div><div class="title" style="clear: both"><h2 class="title" style="clear: both">
                <a name="d0e462" id="d0e462"></a>7.3.&#xa0;Prerequisites
              <a name="a7.3.Prerequisites"></a></h2>
            
          
        
        <p>
          This HowTo assumes you are already familiar with using
          and configuring services in OpenEngSB.
        </p>
      
      
        
          
            
              </div><div class="title" style="clear: both"><h2 class="title" style="clear: both">
                <a name="d0e467" id="d0e467"></a>7.4.&#xa0;Create
                required connectors
              <a name="a7.4.Create________________required_connectors"></a></h2>
            
          
        
        <p>
          Now one logging service and one email service should be
          created. Create one notification service as described in
          the <a href="./howto_logging.html" target="_top" class="link">previous example</a>. Please name it
          &quot;notification&quot; instead of test1 or test2. Now create a
          logging service:
        </p>
        
          <img src="graphics/context_loggingService.png" align="middle" alt="" />
          
            logging service
          
        
      
      
        
          
            
              </div><div class="title" style="clear: both"><h2 class="title" style="clear: both">
                <a name="d0e480" id="d0e480"></a>7.5.&#xa0;Configure
              <a name="a7.5.Configure"></a></h2>
            
          
        
        <p>
          Go to the &quot;Context&quot; page and configure the domains to use
          the connectors created:
        </p>
        
          <img src="graphics/context_contextOverview.png" align="middle" alt="" />
          
            context overview
          
        
      
      
        
          
            
              </div><div class="title" style="clear: both"><h2 class="title" style="clear: both">
                <a name="d0e490" id="d0e490"></a>7.6.&#xa0;Creating a
                rule
              <a name="a7.6.Creating_a________________rule"></a></h2>
            
          
        
        <p>
          On the &quot;Send Event Page&quot; you can create and edit Rules.
          Therefore they have to be edited directly with a text
          editor. The initial system is empty and does not include
          any rules. To create a rule choose &quot;new&quot;. Enter &quot;hello1&quot;
          into the rulename input field. Make also sure that &quot;Rule&quot;
          is selected in the type dropdown box.
        </p>
        <p>
          As soon as you edit the content of the rule you can save
          your changes by clicking &quot;save&quot; or revert the changes by
          clicking &quot;cancel&quot;. The name of the rule will
          automatically be prefixed with &quot;org.openengsb&quot;. Please
          insert the following content into the text box and save
          the changes:
        </p>
<div class="programlisting"><pre>
#
# My notification rule
#
# Sends &quot;Hello World&quot; notification to test recipient.
#

when
        Event(name == &quot;42&quot;)
then
        example.doSomething(&quot;Hello World&quot;);
        Notification n = new Notification();
        n.setSubject(&quot;testsubject&quot;);
        n.setMessage(&quot;testMessage&quot;);
        n.setRecipient(&quot;testRecipient&quot;);
        notification.notify(n);
   
</pre></div>
        
          <img src="graphics/context_event.png" align="middle" alt="" />
          
            event
          
        
        <p>
          Basically this rule reacts on all events (when clause).
          &quot;log&quot; is a helper class using the default log connector
          of the log domain to write information to a log file.
          Notification uses the default notification connector to
          inform a person. More details about this topic can be
          found in the user documentation at rules, domains and
          connectors.
        </p>
        <p>
          To run a test the n.setRecipient property should be
          changed to a (e.g.) your email address.
        </p>
      
      
        
          
            
              </div><div class="title" style="clear: both"><h2 class="title" style="clear: both">
                <a name="d0e508" id="d0e508"></a>7.7.&#xa0;Throw Event
              <a name="a7.7.Throw_Event"></a></h2>
            
          
        
        <p>
          Now we can throw an event and see if the rules work
          correctly. Stay on the &quot;Send Event Page&quot; enter for the
          contextId field &quot;foo&quot; and press send:
        </p>
        <p>
          foo represents the name of the project. For a detailed
          description about projects and the context see the user
          documentation. You've should received a email via the
          rule to the email address configured previously). In
          addition using the &quot;log:display&quot; command in the OpenEngSB
          console should present (anywhere in the long log) a
          logging entry similar to the following (you have to
          search for the output of the LogService. The other fields
          can change):
        </p>
        
          <img src="graphics/context_loggingOutput.png" align="middle" alt="" />
          
            output
          
        
      
      
        
          
            
              </div><div class="title" style="clear: both"><h2 class="title" style="clear: both">
                <a name="d0e520" id="d0e520"></a>7.8.&#xa0;Next Steps
              <a name="a7.8.Next_Steps"></a></h2>
            
          
        
        <p>
          Congratulation. You've gained basic knowledge about the
          OpenEngSB and its functionality. Nevertheless, you've
          just touched the surface. As a next step it is
          recommended continue with further tutorials user manual
          and start exploring the world of the OpenEngSB.
        </p>
      
    
    
      <hr />
      <table border="0" class="bodyTable" width="100%" summary="Navigation footer">
        <tr class="a">
          <td width="40%" align="left">
            <a href="howto.logging.html">Prev</a>&#xa0;
          </td>
          <td width="20%" align="center">
            <a href="openengsb-manual.html">Home</a>
          </td>
          <td width="40%" align="right">
            &#xa0;<a href="howto.connector.html">Next</a>
          </td>
        </tr>
        <tr class="b">
          <td width="40%" align="left" valign="top">
            Chapter&#xa0;6.&#xa0;HowTo - First steps with the OpenEngSB (Send
            mails via the OpenEngSB)&#xa0;
          </td>
          <td width="20%" align="center">
            <span style="color:white;font-size:85%;"><a class="externalLink" href="http://openengsb.org/" title="OpenEngSB Community">OpenEngSB
            Community</a></span>
          </td>
          <td width="40%" align="right" valign="top">
            &#xa0;Chapter&#xa0;8.&#xa0;HowTo - Create a connector for an already
            existing domain for the OpenEngSB
          </td>
        </tr>
      </table>
    
  </div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    </div>
</div>
    <div id="footer">
      <div class="xright">&#169;            2009-2011
                
                               - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a> <script type="text/javascript" src="http://www.ohloh.net/p/494725/widgets/project_thin_badge.js"></script></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
