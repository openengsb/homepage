<!--

    Licensed to the Austrian Association for Software Tool Integration (AASTI)
    under one or more contributor license agreements. See the NOTICE file
    distributed with this work for additional information regarding copyright
    ownership. The AASTI licenses this file to you under the Apache License,
    Version 2.0 (the "License"); you may not use this file except in compliance
    with the License. You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Sep 17, 2011 -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>
    
    
    
      Chapter 42. Prepare and use Non-OSGi Artifacts
    </title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");

            
      <!--[if IE]>
      @import url("../css/site-ie-fixes.css");
      <![endif]-->
    </style>

        <!--[if IE]><link rel="stylesheet" href="../css/site-ie-fixes.css" type="text/css" media="all" /><![endif]-->
    <link rel="icon" type="image/x-icon" href="../images/openengsb.ico" />
    <link rel="shortcut icon" type="image/x-icon" href="../images/openengsb.ico" />
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
        <meta name="Date-Revision-yyyymmdd" content="20110917" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                                    
<script type="text/javascript">var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-17453231-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type =
          'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
          'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(ga, s);
        })();</script>
                    </head>
  <body class="composite">
<div id="header">
    <div id="banner">
                  <span id="bannerLeft">
                                                <img src="../images/openengsb_small.png" alt="" />
                </span>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                                        <div class="xleft">
        Last Published: 2011-09-17
                  &nbsp;| Version: 2.0.0-SNAPSHOT "Qualified Q"
                      </div>
            <div class="xright">            <a href="http://openengsb.org/" class="externalLink" target="_blank">Final Release</a>
            |
                <a href="http://openengsb.org/milestone" class="externalLink" target="_blank">Milestone Release</a>
            |
                <a href="http://openengsb.org/nightly" class="externalLink" target="_blank">Nightly Release</a>
              
                              </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
</div>   
<div id="body">
	<div id="content">
    <div id="leftColumn">
      <div id="navcolumn">
             
                                                        <div class="menuItem"><h5>OpenEngSB</h5></div>
                  <ul>
                  <li class="none">
                  <a href="../index.html">Welcome</a>
            </li>
                  <li class="none">
                  <a href="../about.html">What is OpenEngSB?</a>
            </li>
                  <li class="none">
                  <a href="../downloads.html">Downloads</a>
            </li>
                  <li class="none">
                  <a href="https://github.com/openengsb/openengsb/raw/master/CHANGELOG.md" class="externalLink" target="_blank">Changelog</a>
            </li>
                  <li class="none">
                  <a href="https://github.com/openengsb/openengsb/blob/master/KNOWN_ISSUES.md" class="externalLink" target="_blank">Known Issues</a>
            </li>
                  <li class="none">
                  <a href="../sponsors.html">Sponsors</a>
            </li>
                  <li class="none">
                  <a href="../subprojects.html">Subprojects</a>
            </li>
          </ul>
                       <div class="menuItem"><h5>Quickstart</h5></div>
                  <ul>
                  <li class="none">
                  <a href="../docbook/howto.setup.html">Installation</a>
            </li>
                  <li class="none">
                  <a href="../docbook/howto.logging.html">Connectors and Domains</a>
            </li>
                  <li class="none">
                  <a href="../docbook/howto.contexteditor.html">Events</a>
            </li>
          </ul>
                       <div class="menuItem"><h5>Documentation</h5></div>
                  <ul>
                  <li class="none">
                  <a href="../manual/index.html">Manual</a>
            </li>
                  <li class="none">
                  <a href="../reference/faq.html">FAQ</a>
            </li>
                  <li class="none">
                  <a href="../reference/additional.html">Articles</a>
            </li>
                  <li class="none">
                  <a href="http://www.youtube.com/user/cdflexvideo" class="externalLink" target="_blank">Youtube Channel</a>
            </li>
          </ul>
                       <div class="menuItem"><h5>Community</h5></div>
                  <ul>
                  <li class="none">
                  <a href="../community/mailinglists.html">Mailing Lists</a>
            </li>
                  <li class="none">
                  <a href="../community/irc.html">IRC Channels</a>
            </li>
                  <li class="none">
                  <a href="http://twitter.com/openEngSB" class="externalLink" target="_blank">Twitter</a>
            </li>
                  <li class="none">
                  <a href="http://www.facebook.com/group.php?gid=208312030232" class="externalLink" target="_blank">Facebook</a>
            </li>
          </ul>
                       <div class="menuItem"><h5>Development</h5></div>
                  <ul>
                  <li class="none">
                  <a href="../contribution.html">Contribution</a>
            </li>
                  <li class="none">
                  <a href="../source-repository.html">Source</a>
            </li>
                  <li class="none">
                  <a href="../issue-tracking.html">Issues</a>
            </li>
                  <li class="none">
                  <a href="../integration.html">CI</a>
            </li>
                  <li class="none">
                  <a href="../team-list.html">Team</a>
            </li>
          </ul>
                   
                                    </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        
  
  
    
      
      
    
    
      
        
          
            <div class="title"><h2 class="title">
              <a name="developer.wrapped" id="developer.wrapped"></a>Chapter&#xa0;42.&#xa0;Prepare and
              use Non-OSGi Artifacts
            <a name="Chapter42.Prepare_and______________use_Non-OSGi_Artifacts"></a></h2>
          
        
      
      <p>
        Basically, wrapped JARs do not differ in any way from basic
        jars, besides that they are deployable in OSGi
        environments. They are used as regular jar files in the
        OpenEngSB. Nevertheless, the wrapping itself is not as
        painless. This chapter tries to explain the process in
        detail.
      </p>
      
        
          
            
              </div><div class="title" style="clear: both"><h2 class="title" style="clear: both">
                <a name="developer.wrapped.base" id="developer.wrapped.base"></a>42.1.&#xa0;Create
                Wrapped Artifacts
              <a name="a42.1.Create________________Wrapped_Artifacts"></a></h2>
            
          
        
        <p>
          This chapter is a step by step guide on how to create a
          wrapped JAR.
        </p>
        
          <ol class="orderedlist" style="list-style-type: decimal">
            <li class="listitem">
              <p>
                In case that no osginized library is available in
                the public repositories a package has to be
                created. Because of the simplicity of the process
                it should be done by hand. First of all create a
                folder with the name of the project you like to
                wrap within openengsb/wrapped. Typically the
                groupId of the bundle to wrap is sufficient. For
                example, for a project wrapping all Wicket bundles
                the folder org.apache.wicket is created.
              </p>
            </li>
            <li class="listitem">
              <p>
                As a next step add the newly created folder as a
                module to the openengsb/wrapped/pom.xml file in the
                module section. For the formerly created Wicket
                project org.apache.wicket should be added to the
                module section.
              </p>
            </li>
            <li class="listitem">
              <p>
                Now create a pom.xml file in the newly created
                project folder.
              </p>
            </li>
            <li class="listitem">
              <p>
                The pom.xml contains the basic project information.
                As parent for the project the wrapped/pom.xml
                should be used. Basically for every wrapped jar the
                project has the following structure:
              </p>
<div class="programlisting"><pre>
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!--
OPENENGSB LICENSE
--&gt;
&lt;project&gt;

  &lt;parent&gt;
    &lt;groupId&gt;org.openengsb.wrapped&lt;/groupId&gt;
    &lt;artifactId&gt;openengsb-wrapped&lt;/artifactId&gt;
    &lt;version&gt;1&lt;/version&gt;
  &lt;/parent&gt;

  &lt;properties&gt;
    &lt;bundle.symbolicName&gt;wrapped_jar_group_id&lt;/bundle.symbolicName&gt;
    &lt;wrapped.groupId&gt;wrapped_jar_group_id&lt;/wrapped.groupId&gt;
    &lt;wrapped.artifactId&gt;wrapped_jar_artifact_id&lt;/wrapped.artifactId&gt;
    &lt;wrapped.version&gt;wrapped_jar_version&lt;/wrapped.version&gt;
    &lt;bundle.namespace&gt;${wrapped.groupId}&lt;/bundle.namespace&gt;
  &lt;/properties&gt;

  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;${wrapped.groupId}&lt;/groupId&gt;
  &lt;artifactId&gt;org.openengsb.docs.${wrapped.groupId}&lt;/artifactId&gt;
  &lt;version&gt;${wrapped.version}&lt;/version&gt;

  &lt;name&gt;${bundle.symbolicName}&lt;/name&gt;

  &lt;packaging&gt;bundle&lt;/packaging&gt;

  &lt;dependencies&gt;
    &lt;all_jars_which_should_be_embedded /&gt;
  &lt;/dependencies&gt;

&lt;/project&gt;
</pre></div>
            </li>
            <li class="listitem">
              <p>
                Now add the OSGi specific statements for the
                maven-bundle-plugin. While the default export and
                import are already handled in the root pom project
                specific settings have to be configured here. For
                example all packages within the bundle-namespace
                are always exported. This is for most scenarios
                sufficient. In addition all dependencies found are
                automatically imported as required. This is
                generally not desired. Instead the parts of the
                library which have to be imported should be defined
                separately. The following listing gives a short
                example how this OSGI specific part can look like.
                For a full list of possible commands see the <a class="link" href="http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html" target="_top">maven-bundle-plugin
                documentation</a>.
              </p>
<div class="programlisting"><pre>
            &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
            &lt;build&gt;
              ...
               &lt;plugins&gt;
                ...
                &lt;plugin&gt;
                  &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;
                  &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;
                  &lt;extensions&gt;true&lt;/extensions&gt;
                  &lt;configuration&gt;
                    &lt;instructions&gt;
                      &lt;Import-Package&gt;sun.misc;resolution:=optional,
                          javax.servlet;version=&quot;[2.5.0, 3.0.0)&quot;,
                          *;resolution:=optional
                      &lt;/Import-Package&gt;
                    &lt;/instructions&gt;
                  &lt;/configuration&gt;
                &lt;/plugin&gt;
              &lt;/plugins&gt;
            &lt;/build&gt;
            &lt;/project&gt;
         
</pre></div>
            </li>
          </ol>
        
      
      
        
          
            
              </div><div class="title" style="clear: both"><h2 class="title" style="clear: both">
                <a name="d0e3701" id="d0e3701"></a>42.2.&#xa0;Tips and
                Tricks
              <a name="a42.2.Tips_and________________Tricks"></a></h2>
            
          
        
        <p>
          Although the description above sounds quite simple (and
          wrapping bundles is simple mostly) still some nasty
          problems can occur. This section summarizes good tips and
          ideas how to wrap bundles within the OpenEngSB.
        </p>
        
          <ul class="itemizedlist">
            <li class="listitem">
              The best workflow to wrap a bundle is according to
              our experiences, to execute the previously described
              steps and simply start the OpenEngSB
              (openengsb:provision). Either it works or creates a
              huge stack of exceptions with missing import
              statements. Simply try to fulfill one problem, than
              start again till all references are resolved.
            </li>
            <li class="listitem">
              Embedding artifacts is nothing bad. Although it is
              recommended to use all references artifacts of a
              bundle directly as OSGi components it can be such a
              pain sometimes. Some references are simply not
              required by any other bundle or are too hard to port.
              In such cases feel free to directly embed the
              dependencies in the wrapped jar.
            </li>
          </ul>
        
      
    
    
      <hr />
      <table border="0" class="bodyTable" width="100%" summary="Navigation footer">
        <tr class="a">
          <td width="40%" align="left">
            <a href="developer.howto.internal.domain.html">Prev</a>&#xa0;
          </td>
          <td width="20%" align="center">
            <a href="openengsb-manual.html">Home</a>
          </td>
          <td width="40%" align="right">
            &#xa0;<a href="developer.release.html">Next</a>
          </td>
        </tr>
        <tr class="b">
          <td width="40%" align="left" valign="top">
            Chapter&#xa0;41.&#xa0;How To Create an Internal Domain&#xa0;
          </td>
          <td width="20%" align="center">
            <span style="color:white;font-size:85%;"><a class="externalLink" href="http://openengsb.org/" title="OpenEngSB Community">OpenEngSB
            Community</a></span>
          </td>
          <td width="40%" align="right" valign="top">
            &#xa0;Chapter&#xa0;43.&#xa0;Release and Release Process
          </td>
        </tr>
      </table>
    
  </div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    </div>
</div>
    <div id="footer">
      <div class="xright">&#169;            2009-2011
                
                               - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a> <script type="text/javascript" src="http://www.ohloh.net/p/494725/widgets/project_thin_badge.js"></script></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
