<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;46.&nbsp;Java Coding Style</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="openengsb-manual.html" title="OpenEngSB Manual"><link rel="up" href="developer.manual.html" title="Part&nbsp;VII.&nbsp;OpenEngSB Commiters &amp; Contributors"><link rel="prev" href="developer.projectroles.html" title="Chapter&nbsp;45.&nbsp;Project Roles"><link rel="next" href="writing.code.html" title="Chapter&nbsp;47.&nbsp;Writing Code"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns:fo="http://www.w3.org/1999/XSL/Format" id="top"><div id="header"><div class="projectlogo"></div></div></div><div xmlns:fo="http://www.w3.org/1999/XSL/Format" class="mhSpacer"></div><div class="chapter" title="Chapter&nbsp;46.&nbsp;Java Coding Style"><div class="titlepage"><div><div><h2 class="title"><a name="codestyle"></a>Chapter&nbsp;46.&nbsp;Java Coding Style</h2></div></div></div><div class="section" title="46.1.&nbsp;Sun Coding Guidelines"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4033"></a>46.1.&nbsp;Sun Coding Guidelines</h2></div></div></div><p>The OpenEngSB Coding Guidelines are based upon the <a class="link" href="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html" target="_top">Code Conventions for the Java
        Programming Language</a>. There are some additions and deviations for this project.</p><div class="section" title="46.1.1.&nbsp;Line length"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4041"></a>46.1.1.&nbsp;Line length</h3></div></div></div><p>A line length of 80 was standard 10 years ago, but with increasing screen size and resolution a length of
        120 is more reasonable.</p></div><div class="section" title="46.1.2.&nbsp;Wrapping"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4046"></a>46.1.2.&nbsp;Wrapping</h3></div></div></div><p>Use the auto-formatter of your IDE. Import the <a class="link" href="http://dev.openengsb.org/resources/eclipse/formatter.xml" target="_top">Eclipse Formatter file</a>.</p></div><div class="section" title="46.1.3.&nbsp;Number of declarations per line"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4054"></a>46.1.3.&nbsp;Number of declarations per line</h3></div></div></div><p> Only one declaration per line is allowed. </p></div><div class="section" title="46.1.4.&nbsp;Declaration placement"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4059"></a>46.1.4.&nbsp;Declaration placement</h3></div></div></div><p> Declare variables where they are needed. It's easier to read and restricts the scope of variables. Don't
        overshadow variables. </p></div><div class="section" title="46.1.5.&nbsp;Blank lines"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4064"></a>46.1.5.&nbsp;Blank lines</h3></div></div></div><p> The body of a method should not start with a blank line. </p></div></div><div class="section" title="46.2.&nbsp;General"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4069"></a>46.2.&nbsp;General</h2></div></div></div><div class="section" title="46.2.1.&nbsp;File format"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4072"></a>46.2.1.&nbsp;File format</h3></div></div></div><p>Every Java file has to be UTF-8 encoded and has to use UNIX line endings. Indentations consist of four
        spaces, tab-stops are not allowed.</p></div><div class="section" title="46.2.2.&nbsp;Header"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4077"></a>46.2.2.&nbsp;Header</h3></div></div></div><p> Every source file has to start with this header:
        </p><pre class="programlisting">
/**

  Licensed to the Austrian Association for Software Tool Integration (AASTI)
  under one or more contributor license agreements. See the NOTICE file
  distributed with this work for additional information regarding copyright
  ownership. The AASTI licenses this file to you under the Apache License,
  Version 2.0 (the "License"); you may not use this file except in compliance
  with the License. You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

 */</pre><p>
      </p></div><div class="section" title="46.2.3.&nbsp;Duplication"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4085"></a>46.2.3.&nbsp;Duplication</h3></div></div></div><p>Code duplication has to be avoided at all costs.</p></div><div class="section" title="46.2.4.&nbsp;Use guards"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4090"></a>46.2.4.&nbsp;Use guards</h3></div></div></div><p> Guards are a possibility to reduce the amount of nesting. Heavily nested code is much harder to read. Bad:
        </p><pre class="programlisting">
public void foo() {
    if (conditionA) {
        if (conditionB) {
            if (conditionC) {
                // do some work
            }
        } else {
            throw new MyException();
        }
    }
}</pre><p>
        Good:
        </p><pre class="programlisting">
public void foo() {
    if (!conditionA) {
        return;
    }

    if (!conditionB) {
        throw new MyException();
    }

    if (!conditionC) {
        return;
    }

    // do some work
}</pre><p>
      </p></div><div class="section" title="46.2.5.&nbsp;Keep methods short"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4101"></a>46.2.5.&nbsp;Keep methods short</h3></div></div></div><p>Methods longer than 40 lines are candidates for refactoring. A method should only do one thing and has to be
        easily understandable. The number of arguments should be minimized. A method should only be at a single level of
        abstraction.</p></div><div class="section" title="46.2.6.&nbsp;Use enums"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4106"></a>46.2.6.&nbsp;Use enums</h3></div></div></div><p>Prefer typesafe enumerations over integer constants.</p></div><div class="section" title="46.2.7.&nbsp;Avoid use of static members"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4111"></a>46.2.7.&nbsp;Avoid use of static members</h3></div></div></div><p>Static members are a sign of a design error because they are like global variables. It's fine if you declare
        a constant as final abstract of course.</p></div><div class="section" title="46.2.8.&nbsp;Use fully qualified imports"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4116"></a>46.2.8.&nbsp;Use fully qualified imports</h3></div></div></div><p>Don't import org.example.package.*, instead import the needed classes.</p></div><div class="section" title="46.2.9.&nbsp;Never declare implementation types"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4121"></a>46.2.9.&nbsp;Never declare implementation types</h3></div></div></div><p>Use interfaces or the abstract base class instead of concrete implementation classes where possible. Don't
        write: </p><pre class="programlisting">ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();</pre><p> Instead
        use the interface name:
        </p><pre class="programlisting">List&lt;String&gt; names = new ArrayList&lt;String&gt;();</pre><p> This is especially
        important in method signatures. </p></div><div class="section" title="46.2.10.&nbsp;SerialVersionUID"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4132"></a>46.2.10.&nbsp;SerialVersionUID</h3></div></div></div><p> Don't declare serialVersionUID just because your IDE tells you. Have a good reason why you need it. This
        can cause bugs that are hard to detect. </p></div><div class="section" title="46.2.11.&nbsp;Restrict scope of suppressed warnings"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4137"></a>46.2.11.&nbsp;Restrict scope of suppressed warnings</h3></div></div></div><p> If you have to suppress a warning make sure you give it the smallest possible scope. This means you should
        never annotate a whole class with @SuppressWarnings. A method may be acceptable but you should try to annotate
        the problematic statements instead. </p></div><div class="section" title="46.2.12.&nbsp;Use String.format()"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4142"></a>46.2.12.&nbsp;Use String.format()</h3></div></div></div><p> Use String.format() instead of long concatenation chains which are hard to read. </p></div><div class="section" title="46.2.13.&nbsp;Array declaration style"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4147"></a>46.2.13.&nbsp;Array declaration style</h3></div></div></div><p> Always use </p><pre class="programlisting"> Type[] arrayName;</pre><p> instead of the C-like
        </p><pre class="programlisting">Type arrayName[];</pre><p>
      </p></div><div class="section" title="46.2.14.&nbsp;Comments"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4158"></a>46.2.14.&nbsp;Comments</h3></div></div></div><p> Don't make funny comments, be professional. All comments have to be in English. Comment what methods do,
        not how they do it. Do not comment what is already stated in code. </p></div></div><div class="section" title="46.3.&nbsp;Naming"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4163"></a>46.3.&nbsp;Naming</h2></div></div></div><div class="section" title="46.3.1.&nbsp;Interfaces"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4166"></a>46.3.1.&nbsp;Interfaces</h3></div></div></div><p> Interfaces are not marked by starting their names with I. This exposes more information than necessary and
        is not Java-like. </p></div><div class="section" title="46.3.2.&nbsp;Don't abbreviate"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4171"></a>46.3.2.&nbsp;Don't abbreviate</h3></div></div></div><p> Do not use abbreviations if it's not a project wide standard. Long method names are preferable to
        inconsistency. With automatic code completion this isn't a problem anyway. </p></div></div><div class="section" title="46.4.&nbsp;No clutter"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4176"></a>46.4.&nbsp;No clutter</h2></div></div></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Exception/Log Messages have to be concise. Don't end messages with "...".</p></li><li class="listitem"><p>Don't overuse FINAL, use it where you have a good reason something has to be final. Although it doesn't
            hurt to declare everything as final it clutters the code.</p></li><li class="listitem"><p>Don't use history tables in source files. Use the SCM system if you are interested in the changes of a
            file.</p></li><li class="listitem"><p>Don't use the JavaDoc author tag. Also use the SCM system.</p></li><li class="listitem"><p>Don't declare unnecessary constructors, especially the empty default constructor.</p></li><li class="listitem"><p>Don't make implicit calls explicitly, i.e. calling super(); in every constructor.</p></li><li class="listitem"><p>Don't specify modifiers that are implicit, i.e. don't make methods in interfaces <code class="code">public
              abstract</code>.</p></li><li class="listitem"><p>Don't initialize fields with null, they are automatically initialized with null.</p></li><li class="listitem"><p>Don't use banners in comments.</p></li><li class="listitem"><p>Don't use closing brace comments, i.e. } // end if, they are a sign of too long methods.</p></li><li class="listitem"><p>Don't comment out code and commit it. This confuses programmers why it is there. Simply delete it, it's
            still present in the SCM history.</p></li></ul></div><p>
    </p></div><div class="section" title="46.5.&nbsp;Exception Handling"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4219"></a>46.5.&nbsp;Exception Handling</h2></div></div></div><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Don't log and throw. Either a exception should be logged or thrown to be processed at a more appropriate
            place.</p></li><li class="listitem"><p>Don't swallow exceptions silently. If you have to do it, you have to make a comment stating the
            reason.</p></li><li class="listitem"><p>Use runtime exceptions where possible.</p></li><li class="listitem"><p>Wrap exceptions in a RuntimeException if you don't want to specify the Exception in your method
            signature and you can't handle it.</p></li><li class="listitem"><p>Write meaningful exception message.</p></li></ul></div><p>
    </p></div><div class="section" title="46.6.&nbsp;Tests"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4241"></a>46.6.&nbsp;Tests</h2></div></div></div><div class="section" title="46.6.1.&nbsp;General"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4244"></a>46.6.1.&nbsp;General</h3></div></div></div><p>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Make use of JUnit 4 features, e.g. @Test(expected = SomeException.class)</p></li><li class="listitem"><p>Tests should not output anything. They have to be automatically verified.</p></li><li class="listitem"><p>Don't catch exceptions just to fail manually. Declare the method to throw the exception.</p></li><li class="listitem"><p>Install a shutdown hook for test data files. This assures that they will be deleted and the project
              remains in a clean state.</p></li><li class="listitem"><p>Use <a class="link" href="http://code.google.com/p/mockito/" target="_top">Mockito</a> for mocking.</p></li><li class="listitem"><p>Tests should have descriptive method names. It should be deducible what will be tested. Bad:
                <code class="code">testError()</code>. Good: <code class="code">invalidInMessage_ShouldReturnErrorResponse()</code>.</p></li></ul></div><p>
      </p></div><div class="section" title="46.6.2.&nbsp;Naming Scheme"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4278"></a>46.6.2.&nbsp;Naming Scheme</h3></div></div></div><p> The Maven profiles for running the tests are configured to filter based on the naming of the test class.
        The package layout is just a further convenience for the developer for running the tests manually. </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Unit Tests test one class/method/feature in isolation from their dependencies by using test doubles as
              replacement. They should be fast and need no special environment setup for execution.</p></li><li class="listitem"><p>Filenames end with Test.java</p></li><li class="listitem"><p>Located in the normal package structure, i.e.
              <code class="code">outer.project.package.inner.project.package</code></p></li><li class="listitem"><p>Integration Tests combine individual software modules to test their interaction with each other. They
              do not need a special environment setup for execution.</p></li><li class="listitem"><p>Filenames end with IT.java</p></li><li class="listitem"><p>Located in <code class="code">outer.project.package.it.inner.project.package</code></p></li><li class="listitem"><p>User Tests need a special execution environment and thus are not run automatically during any maven
              phase.</p></li><li class="listitem"><p>Filenames end with UT.java</p></li><li class="listitem"><p>Located in <code class="code">outer.project.package.ut.inner.project.package</code></p></li></ul></div><p>
      </p></div></div><div class="section" title="46.7.&nbsp;XML Formatting"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4318"></a>46.7.&nbsp;XML Formatting</h2></div></div></div><div class="section" title="46.7.1.&nbsp;File Format"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4321"></a>46.7.1.&nbsp;File Format</h3></div></div></div><p>Every XML file has to be UTF-8 encoded and has to use UNIX line endings. Indentations consist of TWO spaces,
        tabstops are not allowed. The line length shouldn't exceed 120 characters.</p></div><div class="section" title="46.7.2.&nbsp;Eclipse Settings"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4326"></a>46.7.2.&nbsp;Eclipse Settings</h3></div></div></div><p>If you use Eclipse please choose these settings for your OpenEngSB workspace: </p><div class="mediaobject" title="Eclipse XML Settings Dialog" align="center"><img src="graphics/eclipse-xml-settings.png" align="middle"><div class="caption"><p>Eclipse XML Settings</p></div></div><p>
      </p></div><div class="section" title="46.7.3.&nbsp;Recommended Readings"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4340"></a>46.7.3.&nbsp;Recommended Readings</h3></div></div></div><p>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Clean Code, Robert C. Martin, 2008</p></li><li class="listitem"><p>Effective Java Second Edition, Joshua Bloch, 2008</p></li><li class="listitem"><p>
              <a class="link" href="http://www.garshol.priv.no/blog/105.html" target="_top">7 tips on writing clean code</a>
            </p></li></ul></div><p>
      </p></div></div></div><div xmlns:fo="http://www.w3.org/1999/XSL/Format" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="developer.projectroles.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="openengsb-manual.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="writing.code.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;45.&nbsp;Project Roles&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:85%;"><a href="http://openengsb.org/" title="OpenEngSB Community">OpenEngSB Community</a></span></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;47.&nbsp;Writing Code</td></tr></table></div></body></html>